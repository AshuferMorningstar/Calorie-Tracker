:root{
  /* Almond-white theme */
  --bg-start: #fbf8f3; /* very light almond */
  --bg-end:   #f6f2eb; /* subtle warm gradient */
  --card:     rgba(24,28,31,0.04);
  --panel-bg: #f6f2eb;
  --card-bg: #ffffff;
  --card-border: rgba(0,0,0,0.06);
  --card-shadow: 0 6px 18px rgba(36,48,49,0.06);
  --accent1:  #8fbf8a; /* pistachio */
  --accent2:  #f2b880; /* soft peach */
  --hover-bg: rgba(0,0,0,0.03);
  --overlay: rgba(36,48,49,0.06);
  --muted:    #6b6f72; /* neutral text */
  --glass:    rgba(255,255,255,0.6);
  --text:     #243031; /* dark slate text */
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,var(--bg-start),var(--bg-end));color:var(--text);-webkit-font-smoothing:antialiased}
.splash{height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.3),transparent)}
.logo-wrap{display:flex;flex-direction:column;align-items:center;gap:12px;animation:fadeUp 900ms cubic-bezier(.2,.9,.3,1) both;padding:0;margin:0;background:transparent;border-radius:0;box-shadow:none}
.splash-logo{width:120px;height:120px;object-fit:contain;border-radius:0;box-shadow:none}
.app-name{margin:0;font-size:28px;letter-spacing:0.2px;color:var(--text);font-weight:700}
.subtitle{margin:0;color:var(--muted);font-size:14px}

@keyframes fadeUp{from{opacity:0;transform:translateY(18px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}

/* subtle logo pop and float */
@keyframes logoPop{0%{transform:translateY(6px) scale(.96)}30%{transform:translateY(0) scale(1.06)}60%{transform:translateY(-6px) scale(.99)}100%{transform:translateY(0) scale(1)}}

.splash-logo{animation:logoPop 1500ms ease-in-out both}

/* Splash exit animation */
.splash{transition:opacity 420ms ease, transform 420ms ease}
.splash-exit{opacity:0;transform:translateY(-10px)}

/* Card styles */
.card{
  background: var(--card-bg);
  border-radius:12px;
  padding:14px;
  box-shadow: var(--card-shadow);
  display:flex;
  gap:12px;
  align-items:center;
  border: 1px solid var(--card-border);
}
.card .meta{flex:1}
.card .title{margin:0;font-weight:600;color:var(--text)}
.card .subtitle{margin:2px 0 0;color:var(--muted);font-size:13px}
.cal-badge{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;padding:8px 12px;border-radius:999px;font-weight:700;min-width:72px;text-align:center}
.card-actions{display:flex;gap:8px}
.icon-btn{background:transparent;border:none;padding:6px;border-radius:8px;cursor:pointer;color:var(--muted)}
.icon-btn:hover{background:var(--hover-bg);color:var(--text)}

/* unboxed close button used on logged items */
.icon-btn.close-btn{background:transparent;border:none;padding:6px;border-radius:6px;box-shadow:none;color:var(--muted);display:inline-flex;align-items:center;justify-content:center}
.icon-btn.close-btn:hover{background:var(--hover-bg);color:var(--text)}

/* larger, touch-friendly hamburger button */
.icon-btn.hamburger-icon{font-size:24px;padding:10px;width:52px;height:52px;display:inline-flex;align-items:center;justify-content:center;border-radius:12px}

/* larger back button for top-left navigation */
.icon-btn.back-btn{font-size:20px;padding:8px;width:44px;height:44px;display:inline-flex;align-items:center;justify-content:center;border-radius:10px}

/* prevent overflow and allow wrapping on very small screens */
.card{min-width:0;overflow:hidden;word-break:break-word}
.card *{min-width:0}
.card .meta{min-width:0}
.cal-badge{min-width:48px;flex-shrink:0;padding:6px 10px}

.content{padding:28px;background:transparent}

/* Dashboard grid used on the home screen */
.dashboard-grid{display:grid;grid-template-columns:1fr;gap:12px}
/* stack dashboard cards vertically on desktop to match mobile appearance */
.dashboard-grid .card{flex-direction:column;align-items:flex-start;gap:8px}
.dashboard-grid .card .cal-badge{align-self:flex-start}

/* Square card tile (used for quick actions) */
.square-card{display:inline-flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;font-weight:700;font-size:15px;padding:6px;width:128px;height:128px;border-radius:12px;line-height:1.1;white-space:normal}
.card.square-card{padding:0;display:inline-flex;align-items:center;justify-content:center}
.card.square-card > div{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}

/* mini calendar used inside square tile */
.mini-cal{width:100%;display:flex;flex-direction:column;gap:4px;align-items:center}
.mini-cal .dow-row{display:grid;grid-template-columns:repeat(7,1fr);width:86%;gap:2px}
.mini-cal .dow{font-size:9px;color:var(--muted);text-align:center}
.mini-cal .dates-grid{display:grid;grid-template-columns:repeat(7,1fr);width:86%;gap:4px}
.mini-cal .date-cell{font-size:12px;height:14px;display:flex;align-items:center;justify-content:center;color:var(--muted);border-radius:6px}
.mini-cal .date-cell.today{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;font-weight:700}

/* month calendar styles */
.month-cal .date-cell{background:transparent}
.month-cal .date-cell.today{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;font-weight:700}
.month-cal .date-cell.future{color:rgba(36,48,49,0.28)}
.cal-header .icon-btn[disabled]{opacity:0.4;pointer-events:none}


/* Dashboard visual separation */
.dashboard-header{padding-bottom:12px;margin-bottom:8px;border-bottom:1px solid var(--card-border)}
.dashboard-grid .card{box-shadow: 0 12px 30px rgba(36,48,49,0.10);border:1px solid var(--card-border);background:var(--card-bg)}
.dashboard-grid .card:hover{transform:translateY(-4px);transition:transform 180ms ease}

@media (max-width:480px){
  .dashboard-grid{grid-template-columns:1fr}
  .card{padding:12px}
}

/* Goal selection modal (first-time users) */
.goal-modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:var(--overlay);z-index:50}
.goal-box{background:transparent;padding:0;border-radius:0;box-shadow:none;min-width:0;max-width:520px;text-align:center}
.goal-box h3{margin:8px 0 6px;color:var(--text)}
.goal-box .muted{color:var(--muted);margin:0 0 8px}
.goal-actions{display:flex;gap:12px;justify-content:center}
.goal-actions .card{flex:1;padding:10px 14px;border-radius:999px;border:2px solid var(--accent1);background:transparent;color:var(--accent1);font-weight:700;cursor:pointer}
.goal-actions .card.secondary{border-color:var(--accent2);color:var(--accent2)}
.goal-actions .card:hover{filter:brightness(0.98);transform:translateY(-1px)}

/* Onboarding form styles */
.form-row{display:flex;flex-direction:column;align-items:flex-start;gap:6px;margin-top:10px}
.form-row label{font-size:13px;color:var(--muted)}
.form-row input,.form-row select{width:100%;padding:10px;border-radius:8px;border:1px solid var(--card-border);background:var(--card-bg);color:var(--text)}
.goal-box input::placeholder{color:rgba(36,48,49,0.28)}
.goal-box .icon-btn{border:1px solid rgba(0,0,0,0.06);background:transparent;padding:8px 12px}
.goal-box .card{background:var(--accent1);color:white;border-radius:10px;padding:10px 12px;border:none}

@media (max-width:480px){
  .goal-actions{flex-direction:column}
  .goal-actions .card{width:100%}
  .goal-box{padding:14px}
}

/* Dropdown drawer styles */
.dropdown{position:relative}
.dropdown-trigger{width:100%;padding:10px;border-radius:8px;border:1px solid var(--card-border);background:var(--card-bg);display:flex;justify-content:space-between;align-items:center;cursor:pointer}
.dropdown-trigger:focus{outline:2px solid rgba(143,191,138,0.25)}
.dropdown-trigger.disabled{opacity:0.6;pointer-events:none}
.chev{opacity:0.7;margin-left:8px}
.dropdown-drawer{position:absolute;left:0;right:0;top:calc(100% + 8px);background:var(--card-bg);border-radius:10px;box-shadow:0 10px 30px rgba(36,48,49,0.08);padding:6px;z-index:60;display:flex;flex-direction:column;gap:6px}
.dropdown-item{background:transparent;border:none;padding:10px;border-radius:8px;text-align:left;cursor:pointer}
.dropdown-item:hover{background:var(--hover-bg)}

@media (max-width:480px){
  .dropdown-drawer{left:0;right:0}
}

.unit-btn{border:1px solid rgba(0,0,0,0.06);background:transparent;padding:6px 10px;border-radius:8px;cursor:pointer}
.unit-btn.active{background:var(--accent1);color:white;border-color:var(--accent1)}

/* Responsive */
@media (max-width:480px){.logo{width:96px;height:96px}.app-name{font-size:22px}}

@media (max-width:480px){
  /* make cards stack their internal content vertically so nothing is cut off */
  .card{flex-direction:column;align-items:flex-start;gap:8px;padding:12px}
  .card .meta{width:100%}
  .card .cal-badge{align-self:flex-start}
  .dashboard-grid{grid-template-columns:1fr}
  /* reduce main padding (override inline style if needed) */
  main{padding:12px !important}
  .goal-box{max-width:100%;padding:12px}
  .goal-actions{gap:8px}
  .goal-actions .card{padding:10px}
  .form-row input{font-size:15px}
}

/* Calendar stats grid: two columns on desktop, stack on small screens */
.calendar-stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:480px){
  .calendar-stats-grid{grid-template-columns:1fr}
}

/* Slide-out panel from right (opened by hamburger) */
.slide-panel{
  position:fixed;
  right:0;
  top:0;
  height:100vh;
  width:280px;
  max-width:80%;
  background:var(--panel-bg, var(--card-bg));
  box-shadow:-12px 0 30px rgba(0,0,0,0.15);
  transform:translateX(110%);
  transition:transform 240ms ease;
  z-index:1200;
  display:flex;
  flex-direction:column;
}
.slide-panel.open{ transform:translateX(0); }
.slide-panel .panel-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:16px;
  border-bottom:1px solid var(--card-border);
}
.slide-panel .panel-body{
  padding:12px 16px;
  overflow:auto;
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.slide-panel .panel-row{ display:flex; flex-direction:column; gap:6px; }
.slide-panel .icon-btn{ background:transparent; border:0; font-size:18px; cursor:pointer }

/* dark theme hook */
.theme-dark{
  --bg-start:#080808;
  --bg-end:#0f0f0f;
  --text:#e9eef0;
  --card:#151515;
  --muted:#cfcfcf;
  --panel-bg:#151515;
  --card-bg:#151515;
  --card-border:#2b2b2b;
  --card-shadow:0 6px 18px rgba(0,0,0,0.6);
}

@media (max-width:480px){
  .slide-panel{ width:100%; max-width:100%; }
}

/* backdrop behind slide-panel */
.panel-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.32);
  opacity:0;
  pointer-events:none;
  transition:opacity 200ms ease;
  z-index:1100;
}
.panel-backdrop.open{ opacity:1; pointer-events:auto }

.track-grid{display:grid;grid-template-columns:1fr;gap:16px}
/* keep cards stacked like mobile for desktop as well */
.track-grid .card{flex-direction:column;align-items:flex-start;gap:8px}
.track-grid .card .cal-badge{align-self:flex-start}
@media (max-width:720px){.track-grid{grid-template-columns:1fr}}
.track-grid .card ul{margin:0;padding:0;width:100%}
.track-grid .card ul li.card{width:100%}
.track-form .form-row{display:flex;flex-direction:column;gap:6px;margin-bottom:6px}
.track-form input{padding:8px;border-radius:8px;border:1px solid var(--card-border);background:var(--card-bg);color:var(--text)}
.track-grid .card{padding:12px}
.track-grid .card .card{padding:8px}
.track-grid input[type="date"]{padding:8px;border-radius:8px;border:1px solid var(--card-border);background:var(--card-bg);color:var(--text)}

/* profile top dashboard (full-width header, not a card) */
.profile-top{
  width:100%;
  max-width:720px;
  margin:0 auto 8px auto;
  padding:6px 12px; /* add horizontal padding so header text isn't flush to edge */
  border-bottom:1px solid rgba(36,48,49,0.06);
}

.profile-top h2{margin:0;font-size:18px;font-weight:600}

/* theme toggle (sun / moon) */
.theme-toggle{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px;
  border-radius:8px;
  border:0;
  background:transparent;
  cursor:pointer;
  font-weight:600;
  color:var(--muted);
}
.theme-toggle .tt-icon{font-size:18px;display:inline-block}
.theme-toggle[aria-pressed="true"]{color:var(--text)}

/* ensure buttons inside the slide panel follow theme variables */
.slide-panel .card{
  background:var(--card-bg);
  color:var(--text);
  border:1px solid var(--card-border);
  box-shadow:var(--card-shadow);
  padding:12px;
  border-radius:10px;
  text-align:left;
}
.slide-panel .card:hover{ transform:translateY(-4px); transition:transform 160ms ease }
.slide-panel .icon-btn{ color:var(--muted) }
.slide-panel .icon-btn:hover{ color:var(--text); background:transparent }
